---
layout: default
---
<div class="post">

<div class="post-header-container {% if page.cover %}has-cover{% endif %}" {% if page.cover %}style="background-image: url({{ page.cover | prepend: site.baseurl }});"{% endif %}>
  <div class="scrim {% if page.cover %}has-cover{% endif %}">
    <header class="post-header">
      <h1 class="title">{{ page.title }}</h1>
      <!--<p class="info">by <strong>{{ page.author }}</strong></p>-->
    </header>
  </div>
</div>

<div class="wrapper">

{% unless page.cover %} {% include page_divider.html %} {% endunless %}

<section class="post-meta">
  <div class="post-date">{{ page.date | date: "%B %-d, %Y" }}</div>
<!--   <div class="post-categories">
  {% if page.categories.size > 0 %}in {% for cat in page.categories %}
    {% if site.jekyll-archives %}
    <a href="{{ site.baseurl }}/categories/#{{ cat }}">{{ cat | capitalize }}</a>{% if forloop.last == false %}, {% endif %}
    {% else %}
    <a href="{{ site.baseurl }}/posts/#{{ cat }}">{{ cat | capitalize }}</a>{% if forloop.last == false %}, {% endif %}
    {% endif %}
  {% endfor %}{% endif %}
  </div> -->
</section>

<article class="post-content">
  {{ content }}
</article>

{% if page.model_path %}
<section class="model-viewer" style="margin-top: 2em;">
  <div id="mcmodel-viewer" data-model-path="{{ page.model_path }}" style="width: 100%; height: 400px; border: 1px solid #ccc; border-radius: 4px; background: #f0f0f0;"></div>
  <div style="text-align: center; margin-top: 0.5em; font-size: 0.9em; color: #666;">
    マウス操作: 左ドラッグで回転 | ホイールでズーム | 右ドラッグで移動
  </div>
</section>
<script src="{{ '/assets/js/three.min.js' | relative_url }}"></script>
<script>
// Define OrbitControls for Three.js after loading three.min.js
THREE.OrbitControls = function(camera, domElement) {
  this.camera = camera;
  this.domElement = domElement;
  this.enabled = true;
  this.target = new THREE.Vector3();
  this.minDistance = 5;
  this.maxDistance = 100;
  this.minPolarAngle = 0;
  this.maxPolarAngle = Math.PI;
  this.enableDamping = true;
  this.dampingFactor = 0.05;
  
  var scope = this;
  var rotateSpeed = 1.0;
  var panSpeed = 1.0;
  var zoomSpeed = 1.2;
  
  var rotateStart = new THREE.Vector2();
  var rotateEnd = new THREE.Vector2();
  var rotateDelta = new THREE.Vector2();
  
  var panStart = new THREE.Vector2();
  var panEnd = new THREE.Vector2();
  var panDelta = new THREE.Vector2();
  
  var spherical = new THREE.Spherical();
  var sphericalDelta = new THREE.Spherical();
  
  var scale = 1;
  var panOffset = new THREE.Vector3();
  
  var STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2 };
  var state = STATE.NONE;
  
  this.update = function() {
    var offset = new THREE.Vector3();
    offset.copy(scope.camera.position).sub(scope.target);
    spherical.setFromVector3(offset);
    
    if (scope.enableDamping) {
      spherical.theta += sphericalDelta.theta * scope.dampingFactor;
      spherical.phi += sphericalDelta.phi * scope.dampingFactor;
    } else {
      spherical.theta += sphericalDelta.theta;
      spherical.phi += sphericalDelta.phi;
    }
    
    spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));
    spherical.makeSafe();
    spherical.radius *= scale;
    spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));
    scope.target.add(panOffset);
    offset.setFromSpherical(spherical);
    scope.camera.position.copy(scope.target).add(offset);
    scope.camera.lookAt(scope.target);
    
    if (scope.enableDamping) {
      sphericalDelta.theta *= (1 - scope.dampingFactor);
      sphericalDelta.phi *= (1 - scope.dampingFactor);
    } else {
      sphericalDelta.set(0, 0, 0);
    }
    
    scale = 1;
    panOffset.set(0, 0, 0);
  };
  
  function onMouseDown(event) {
    if (!scope.enabled) return;
    event.preventDefault();
    if (event.button === 0) {
      state = STATE.ROTATE;
      rotateStart.set(event.clientX, event.clientY);
    } else if (event.button === 1) {
      state = STATE.DOLLY;
    } else if (event.button === 2) {
      state = STATE.PAN;
      panStart.set(event.clientX, event.clientY);
    }
  }
  
  function onMouseMove(event) {
    if (!scope.enabled) return;
    event.preventDefault();
    if (state === STATE.ROTATE) {
      rotateEnd.set(event.clientX, event.clientY);
      rotateDelta.subVectors(rotateEnd, rotateStart);
      sphericalDelta.theta -= 2 * Math.PI * rotateDelta.x / domElement.clientWidth * rotateSpeed;
      sphericalDelta.phi -= 2 * Math.PI * rotateDelta.y / domElement.clientHeight * rotateSpeed;
      rotateStart.copy(rotateEnd);
      scope.update();
    } else if (state === STATE.PAN) {
      panEnd.set(event.clientX, event.clientY);
      panDelta.subVectors(panEnd, panStart);
      var targetDistance = scope.camera.position.distanceTo(scope.target);
      pan(panDelta.x * targetDistance * panSpeed / 500, -panDelta.y * targetDistance * panSpeed / 500);
      panStart.copy(panEnd);
      scope.update();
    }
  }
  
  function pan(deltaX, deltaY) {
    var offset = new THREE.Vector3();
    var te = scope.camera.matrix.elements;
    offset.set(te[0], te[1], te[2]);
    offset.multiplyScalar(deltaX);
    panOffset.add(offset);
    offset.set(te[4], te[5], te[6]);
    offset.multiplyScalar(deltaY);
    panOffset.add(offset);
  }
  
  function onMouseUp() {
    if (!scope.enabled) return;
    state = STATE.NONE;
  }
  
  function onMouseWheel(event) {
    if (!scope.enabled) return;
    event.preventDefault();
    event.stopPropagation();
    if (event.deltaY < 0) {
      scale /= zoomSpeed;
    } else if (event.deltaY > 0) {
      scale *= zoomSpeed;
    }
    scope.update();
  }
  
  // Touch events for mobile support
  var touchStartDistance = 0;
  
  function onTouchStart(event) {
    if (!scope.enabled) return;
    event.preventDefault();
    
    switch (event.touches.length) {
      case 1: // one-fingered touch: rotate
        state = STATE.ROTATE;
        rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);
        break;
      case 2: // two-fingered touch: zoom
        state = STATE.DOLLY;
        var dx = event.touches[0].pageX - event.touches[1].pageX;
        var dy = event.touches[0].pageY - event.touches[1].pageY;
        touchStartDistance = Math.sqrt(dx * dx + dy * dy);
        break;
    }
  }
  
  function onTouchMove(event) {
    if (!scope.enabled) return;
    event.preventDefault();
    
    switch (event.touches.length) {
      case 1:
        if (state === STATE.ROTATE) {
          rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);
          rotateDelta.subVectors(rotateEnd, rotateStart);
          sphericalDelta.theta -= 2 * Math.PI * rotateDelta.x / domElement.clientWidth * rotateSpeed;
          sphericalDelta.phi -= 2 * Math.PI * rotateDelta.y / domElement.clientHeight * rotateSpeed;
          rotateStart.copy(rotateEnd);
          scope.update();
        }
        break;
      case 2:
        if (state === STATE.DOLLY) {
          var dx = event.touches[0].pageX - event.touches[1].pageX;
          var dy = event.touches[0].pageY - event.touches[1].pageY;
          var distance = Math.sqrt(dx * dx + dy * dy);
          scale *= touchStartDistance / distance;
          touchStartDistance = distance;
          scope.update();
        }
        break;
    }
  }
  
  function onTouchEnd() {
    if (!scope.enabled) return;
    state = STATE.NONE;
  }
  
  domElement.addEventListener('mousedown', onMouseDown, false);
  domElement.addEventListener('mousemove', onMouseMove, false);
  domElement.addEventListener('mouseup', onMouseUp, false);
  domElement.addEventListener('wheel', onMouseWheel, false);
  domElement.addEventListener('touchstart', onTouchStart, false);
  domElement.addEventListener('touchmove', onTouchMove, false);
  domElement.addEventListener('touchend', onTouchEnd, false);
  domElement.addEventListener('contextmenu', function(e) { e.preventDefault(); }, false);
};
</script>
<script src="{{ '/assets/js/mcmodel-viewer.js' | relative_url }}"></script>
{% endif %}


{% if page.textures %}
<section class="texture-list" style="margin-top: 2em; padding-left: 2%;">
  <h3>使用テクスチャ一覧</h3>
  <div style="display: flex; flex-wrap: wrap; gap: 1em;">
    {% for tex in page.textures %}
      <div style="text-align: center;">
        <img src="{{ '/assets/textures/' | append: tex | relative_url }}" alt="{{ tex }}" style="height: 64px; border: 1px solid #ccc; border-radius: 4px; background: #fff;" />
        <div style="font-size: 0.9em;">{{ tex }}</div>
      </div>
    {% endfor %}
  </div>
</section>
{% endif %}

  
{% if site.jekyll-archives %}
{% if page.tags.size > 0 %}
<section class="tags">
  <strong>Tags:</strong> {% for tag in page.tags %}<a href="{{ site.baseurl }}/tag/{{ tag }}">{{ tag }}</a>{% if forloop.last == false %},&nbsp;{% endif %}{% endfor %}
</section>
{% endif %}
{% endif %}

<section class="rss">
<!--   <p class="rss-subscribe text"><strong>Subscribe <a href="{{ "/feed.xml" | prepend: site.baseurl }}">via RSS</a></strong></p> -->
</section>

<!-- <section class="share">
  <h3>この記事を共有</h3> -->
	
<!--   <span>Share: </span>
<button onclick="toggleEmbed()">埋め込みを表示</button>

<div id="embedContainer" style="display: none;">
  <input id="shareUrl" value="{{ site.url }}{{ page.url }}" readonly>
  <button onclick="copyShareUrl()">コピー</button>
  <textarea id="embedCode" readonly>
<iframe src="{{ site.url }}{{ page.url }}" width="100%" height="300" frameborder="0"></iframe>
  </textarea>
  <button onclick="copyEmbedCode()">埋め込みコピー</button>
</div> -->
	
<!--   {% for social in site.social %}
    {% capture full_url %}{{ site.url }}{{ site.baseurl }}{{ page.url }}{% endcapture %}
    {% if social.name == "Twitter" and social.share == true %}
      <a href="//twitter.com/share?text={{ page.title | cgi_escape }}&url={{ full_url | cgi_escape}}&via={{social.username}}"
        onclick="window.open(this.href, '{{ social.icon }}-share', 'width=550,height=255');return false;">
        <i class="fa fa-{{ social.icon | remove_first: '-square' }}-square fa-lg"></i>
      </a>
{% endif %} -->
<!--     {% if social.name == "Facebook" and social.share == true %}
      <a href="//www.facebook.com/sharer.php?t={{ page.title | cgi_escape }}&u={{ full_url | cgi_escape}}"
        onclick="window.open(this.href, '{{ social.icon }}-share', 'width=550,height=255');return false;">
        <i class="fa fa-{{ social.icon | remove_first: '-square' }}-square fa-lg"></i>
      </a>
    {% endif %}
    {% if social.name == "Google+" and social.share == true %}
      <a href="//plus.google.com/share?title={{ page.title | cgi_escape }}&url={{ full_url | cgi_escape}}"
        onclick="window.open(this.href, '{{ social.icon }}-share', 'width=550,height=255');return false;">
        <i class="fa fa-{{ social.icon | remove_first: '-square' }}-square fa-lg"></i>
      </a>
    {% endif %}
    {% if social.name == "LinkedIn" and social.share == true %}
      <a href="//www.linkedin.com/shareArticle?mini=true&url={{ full_url | cgi_escape}}"
        onclick="window.open(this.href, '{{ social.icon }}-share', 'width=550,height=255');return false;">
        <i class="fa fa-{{ social.icon | remove_first: '-square' }}-square fa-lg"></i>
      </a>
    {% endif %}
    {% if social.name == "Pinterest" and social.share == true %}
      <a href="//www.pinterest.com/pin/create/button/?description={{ page.title | cgi_escape }}&url={{ full_url | cgi_escape}}&media={{ site.url }}{% if page.cover %}{{ page.cover | prepend: site.baseurl  }}{% elsif site.cover %}{{ site.cover | prepend: site.baseurl }}{% else %}{{ site.logo | prepend: site.baseurl }}{% endif %}"
        onclick="window.open(this.href, '{{ social.icon }}-share', 'width=550,height=255');return false;">
        <i class="fa fa-{{ social.icon | remove_first: '-square' }}-square fa-lg"></i>
      </a>
    {% endif %}
    {% if social.name == "Reddit" and social.share == true %}
      <a href="//www.reddit.com/submit" onclick="window.location = '//www.reddit.com/submit?url=' + encodeURIComponent('{{ full_url }}') + '&title={{page.title}}'; return false">
        <i class="fa fa-{{ social.icon | remove_first: '-square' }}-square fa-lg"></i>
      </a>
    {% endif %}
    {% if social.name == "Hacker News" and social.share == true %}
      <a href="//news.ycombinator.com/submitlink" onclick="window.location = '//news.ycombinator.com/submitlink?u=' + encodeURIComponent('{{ full_url }}') + '&t={{page.title}}'; return false">
        <i class="fa fa-{{ social.icon | remove_first: '-square' }} fa-lg"></i>
      </a>
    {% endif %}
  {% endfor %} -->
<!-- 	
</section> -->
{% if site.inter_post_navigation == true %}
	<section class="post-navigation">
		<span class="prev-post">
			{% if page.previous.url %}
				<a href="{{page.previous.url | prepend: site.baseurl}}">
					<span class="fa-stack fa-lg">
						<i class="fa fa-square fa-stack-2x"></i>
						<i class="fa fa-angle-double-left fa-stack-1x fa-inverse"></i>
					</span>
					<span class="page-number">{{page.previous.title}}</span>
				</a>
			{% endif %}
		</span>
		<span class="next-post">
			{% if page.next.url %}
				<a href="{{page.next.url | prepend: site.baseurl}}">
					<span class="page-number">{{page.next.title}}</span>
					<span class="fa-stack fa-lg">
						<i class="fa fa-square fa-stack-2x"></i>
						<i class="fa fa-angle-double-right fa-stack-1x fa-inverse"></i>
					</span>
				</a>
			{% endif %}
		</span>
	</section>
{% endif %}

{% if site.disqus_shortname %}
{% unless page.disqus_disabled %}
<section class="disqus">
  <div id="disqus_thread"></div>
  <script type="text/javascript">

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>
{% endunless %}
{% endif %}

</div>
</div>
