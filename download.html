---
layout: page
title: ファイルダウンロード
permalink: /download.html
hide_title: true
---

<style>
    .download-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 40px 20px;
    }

    .download-header {
        text-align: center;
        margin-bottom: 40px;
    }

    .download-header h1 {
        color: #333;
        margin-bottom: 10px;
    }

    .download-header p {
        color: #666;
    }

    .download-form {
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 30px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
    }

    .form-group input {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
        transition: border-color 0.3s;
    }

    .form-group input:focus {
        outline: none;
        border-color: #4CAF50;
        box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.1);
    }

    .download-button {
        width: 100%;
        padding: 14px;
        background: #4CAF50;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.3s;
    }

    .download-button:hover {
        background: #45a049;
    }

    .download-button:disabled {
        background: #ccc;
        cursor: not-allowed;
    }

    .status-message {
        margin-top: 20px;
        padding: 12px;
        border-radius: 4px;
        display: none;
    }

    .status-message.success {
        background: #d4edda;
        border: 1px solid #c3e6cb;
        color: #155724;
    }

    .status-message.error {
        background: #f8d7da;
        border: 1px solid #f5c6cb;
        color: #721c24;
    }

    .status-message.info {
        background: #d1ecf1;
        border: 1px solid #bee5eb;
        color: #0c5460;
    }

    .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #4CAF50;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-left: 10px;
        vertical-align: middle;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .back-link {
        display: inline-block;
        margin-bottom: 20px;
        color: #4CAF50;
        text-decoration: none;
        font-weight: 500;
    }

    .back-link:hover {
        text-decoration: underline;
    }

    .instructions {
        background: #f8f9fa;
        border-left: 4px solid #4CAF50;
        padding: 15px;
        margin-bottom: 20px;
    }

    .instructions h3 {
        margin-top: 0;
        color: #333;
    }

    .instructions ul {
        margin: 10px 0;
        padding-left: 20px;
    }

    .instructions li {
        margin-bottom: 5px;
        color: #666;
    }

    .checkbox-label {
        display: flex;
        align-items: center;
        cursor: pointer;
        font-weight: 500;
    }

    .checkbox-label input[type="checkbox"] {
        width: auto;
        margin-right: 8px;
        cursor: pointer;
    }

    .quality-info {
        margin-top: 8px;
        font-size: 12px;
        color: #666;
        padding-left: 24px;
    }
</style>

<div class="download-container">
    <a href="/Drowse-Lab/other.html" class="back-link" data-i18n="download.back">← その他の機能に戻る</a>
    
    <div class="download-header">
        <h1 data-i18n="download.title">ファイルダウンロード</h1>
        <p data-i18n="download.subtitle">URLからファイルをダウンロードします</p>
    </div>

    <div class="instructions">
        <h3 data-i18n="download.howToUse">使い方</h3>
        <ul>
            <li data-i18n="download.instruction1">ダウンロードしたいファイルのURLを入力してください</li>
            <li data-i18n="download.instruction2">ファイル名を指定できます（省略可）</li>
            <li data-i18n="download.instruction3">ダウンロードボタンをクリックしてファイルを保存します</li>
        </ul>
        <p style="margin-top: 15px; font-size: 13px; color: #666;">
            <strong data-i18n="download.tip">ヒント:</strong>
            <span data-i18n="download.tipContent">Fandom Wikiの画像は、画像を右クリックして「画像アドレスをコピー」で直接URLを取得するか、WikiページのURLをそのまま入力してください。</span>
        </p>
    </div>

    <div class="download-form">
        <div class="form-group">
            <label for="urlInput" data-i18n="download.urlLabel">ファイルURL</label>
            <input 
                type="url" 
                id="urlInput" 
                placeholder="https://example.com/file.pdf" 
                data-i18n-placeholder="download.urlPlaceholder"
                required
            >
        </div>

        <div class="form-group">
            <label for="filenameInput" data-i18n="download.filenameLabel">保存ファイル名（オプション）</label>
            <input 
                type="text" 
                id="filenameInput" 
                placeholder="file.pdf" 
                data-i18n-placeholder="download.filenamePlaceholder"
            >
        </div>

        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" id="enhanceQuality">
                <span data-i18n="download.enhanceQuality">画質を向上させる（画像のみ）</span>
            </label>
            <div class="quality-info" data-i18n="download.qualityInfo">
                画像をアップスケーリングして画質を改善します
            </div>
        </div>

        <button id="downloadBtn" class="download-button" data-i18n="download.downloadButton">ダウンロード</button>

        <div id="statusMessage" class="status-message"></div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const urlInput = document.getElementById('urlInput');
    const filenameInput = document.getElementById('filenameInput');
    const downloadBtn = document.getElementById('downloadBtn');
    const statusMessage = document.getElementById('statusMessage');
    const enhanceQualityCheckbox = document.getElementById('enhanceQuality');

    function showStatus(message, type) {
        statusMessage.textContent = message;
        statusMessage.className = `status-message ${type}`;
        statusMessage.style.display = 'block';
    }

    function hideStatus() {
        statusMessage.style.display = 'none';
    }

    function extractFilenameFromUrl(url, mimeType) {
        try {
            const urlObj = new URL(url);
            const pathname = urlObj.pathname;
            let filename = pathname.split('/').pop();
            
            // クエリパラメータを除去
            if (filename) {
                filename = filename.split('?')[0];
            }
            
            // URLパラメータやクエリから元のファイル名を取得（Fandomなどのサイト用）
            const fileParam = urlObj.searchParams.get('file');
            if (fileParam) {
                filename = fileParam.split('/').pop();
            }
            
            // URLパラメータにformat,webpが含まれているかチェック
            const hasWebPFormat = url.includes('format,webp') || url.includes('format=webp');
            
            // 元がGIFかどうか判定
            const isOriginallyGif = (filename && filename.toLowerCase().includes('.gif')) ||
                                   url.includes('gif') ||
                                   (fileParam && fileParam.toLowerCase().includes('.gif'));
            
            // URLにファイル名が含まれていない場合、またはファイル名に拡張子がない場合
            if (!filename || filename === '' || !filename.includes('.')) {
                // MIMEタイプから拡張子を決定
                const extension = getExtensionFromMimeType(mimeType);
                if (!filename || filename === '') {
                    filename = 'download' + extension;
                } else {
                    filename = filename + extension;
                }
            } else {
                // WebPに変換されている場合の処理
                if (hasWebPFormat || mimeType === 'image/webp') {
                    const lastDotIndex = filename.lastIndexOf('.');
                    if (lastDotIndex !== -1) {
                        const nameWithoutExt = filename.substring(0, lastDotIndex);
                        
                        // 元がGIFならGIFとして保存
                        if (isOriginallyGif) {
                            filename = nameWithoutExt + '.gif';
                        } else {
                            // GIF以外はJPGに変換
                            filename = nameWithoutExt + '.jpg';
                        }
                    }
                } else {
                    // 画像ファイルの拡張子を適切に変更
                    filename = adjustImageExtension(filename, mimeType);
                }
            }
            
            return filename;
        } catch (e) {
            return 'download';
        }
    }

    function getExtensionFromMimeType(mimeType) {
        if (!mimeType) return '';
        
        const mimeToExt = {
            'image/jpeg': '.jpg',
            'image/jpg': '.jpg',
            'image/png': '.png',
            'image/gif': '.gif',
            'image/webp': '.jpg', // WebPはJPGに変換
            'image/bmp': '.bmp',
            'image/svg+xml': '.svg',
            'image/x-icon': '.ico',
            'image/tiff': '.tiff',
            'text/plain': '.txt',
            'text/html': '.html',
            'application/json': '.json',
            'application/xml': '.xml',
            'application/zip': '.zip',
            'application/x-rar-compressed': '.rar',
            'application/x-7z-compressed': '.7z',
            'video/mp4': '.mp4',
            'video/webm': '.webm',
            'audio/mpeg': '.mp3',
            'audio/wav': '.wav'
        };
        
        return mimeToExt[mimeType] || '';
    }

    function adjustImageExtension(filename, mimeType) {
        if (!mimeType || !mimeType.startsWith('image/')) {
            return filename;
        }
        
        // 現在の拡張子を取得
        const lastDotIndex = filename.lastIndexOf('.');
        if (lastDotIndex === -1) {
            return filename + getExtensionFromMimeType(mimeType);
        }
        
        const nameWithoutExt = filename.substring(0, lastDotIndex);
        const currentExt = filename.substring(lastDotIndex).toLowerCase();
        
        // WebP、AVIF、その他の形式をJPGに変換
        if (currentExt === '.webp' || currentExt === '.avif' || currentExt === '.jfif') {
            return nameWithoutExt + '.jpg';
        }
        
        // GIFはそのまま保持
        if (currentExt === '.gif') {
            return filename;
        }
        
        // PNGとJPG/JPEGは適切に保持
        if (currentExt === '.png' || currentExt === '.jpg' || currentExt === '.jpeg') {
            return filename;
        }
        
        // その他の画像形式はMIMEタイプに基づいて決定
        return nameWithoutExt + getExtensionFromMimeType(mimeType);
    }

    async function convertImageBlob(blob, targetFormat, enhanceQuality = false) {
        return new Promise((resolve) => {
            const img = new Image();
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            img.onload = function() {
                let width = img.width;
                let height = img.height;
                
                // 画質向上モード：解像度を上げる
                if (enhanceQuality) {
                    // 元のサイズが小さい場合は2倍または4倍にアップスケール
                    const scaleFactor = (width < 500 || height < 500) ? 4 : 2;
                    width *= scaleFactor;
                    height *= scaleFactor;
                }
                
                canvas.width = width;
                canvas.height = height;
                
                // 画質向上のための設定
                if (enhanceQuality) {
                    ctx.imageSmoothingEnabled = true;
                    ctx.imageSmoothingQuality = 'high';
                    
                    // シャープネスフィルターの適用
                    ctx.filter = 'contrast(1.1) saturate(1.1)';
                }
                
                ctx.drawImage(img, 0, 0, width, height);
                
                // 画質を最高にして保存
                const quality = enhanceQuality ? 1.0 : 0.95;
                
                canvas.toBlob(function(newBlob) {
                    resolve(newBlob);
                }, targetFormat, quality);
            };
            
            img.src = URL.createObjectURL(blob);
        });
    }

    async function enhanceImageQuality(blob) {
        return new Promise((resolve) => {
            const img = new Image();
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            img.onload = function() {
                // 解像度を向上させる
                const scaleFactor = Math.min(4, Math.max(2, 2000 / Math.max(img.width, img.height)));
                const width = Math.round(img.width * scaleFactor);
                const height = Math.round(img.height * scaleFactor);
                
                canvas.width = width;
                canvas.height = height;
                
                // 高画質レンダリング設定
                ctx.imageSmoothingEnabled = true;
                ctx.imageSmoothingQuality = 'high';
                
                // 複数パスでレンダリングして画質向上
                // 1. 基本描画
                ctx.drawImage(img, 0, 0, width, height);
                
                // 2. エッジ強調とノイズ除去のシミュレーション
                const imageData = ctx.getImageData(0, 0, width, height);
                const data = imageData.data;
                
                // 簡易的なアンシャープマスク
                for (let i = 0; i < data.length; i += 4) {
                    // RGBチャンネルに軽微な調整
                    data[i] = Math.min(255, data[i] * 1.02);     // R
                    data[i + 1] = Math.min(255, data[i + 1] * 1.02); // G
                    data[i + 2] = Math.min(255, data[i + 2] * 1.02); // B
                }
                
                ctx.putImageData(imageData, 0, 0);
                
                // 高画質で保存
                canvas.toBlob(function(newBlob) {
                    resolve(newBlob);
                }, blob.type === 'image/png' ? 'image/png' : 'image/jpeg', 1.0);
            };
            
            img.src = URL.createObjectURL(blob);
        });
    }

    async function convertToGif(blob) {
        // WebPアニメーションからGIFへの変換は複雑なため、
        // 静止画として保存するか、元のWebPをGIFとして保存
        // ブラウザの制限により、完全なアニメーション変換は困難
        return blob;
    }

    // FandomのようなWikiサイトから実際の画像URLを取得
    async function extractActualImageUrl(url) {
        // FandomのWikiページの場合
        if (url.includes('fandom.com') && url.includes('wiki')) {
            try {
                showStatus('Wikiページから画像を取得しています...', 'info');
                
                // URLからファイル名を抽出
                const urlObj = new URL(url);
                const fileParam = urlObj.searchParams.get('file');
                
                if (fileParam) {
                    // Wikiページをフェッチして実際の画像URLを探す
                    try {
                        // CORSプロキシ経由でページを取得
                        const pageUrl = url.split('?')[0]; // クエリパラメータを除去
                        const proxyPageUrl = 'https://corsproxy.io/?' + encodeURIComponent(url);
                        
                        const pageResponse = await fetch(proxyPageUrl);
                        if (pageResponse.ok) {
                            const pageText = await pageResponse.text();
                            
                            // 画像URLを正規表現で探す
                            // パターン1: static.wikia.nocookie.net のURL
                            const imgUrlPattern = /https:\/\/static\.wikia\.nocookie\.net\/[^"'\s]+\.gif/gi;
                            const matches = pageText.match(imgUrlPattern);
                            
                            if (matches && matches.length > 0) {
                                // ファイル名に一致する画像URLを探す
                                const targetFilename = fileParam.toLowerCase();
                                for (const match of matches) {
                                    if (match.toLowerCase().includes(targetFilename.replace(/_/g, ''))) {
                                        console.log('Found actual image URL:', match);
                                        // /revision/latest を削除してオリジナル画像を取得
                                        const cleanUrl = match.split('/revision/')[0];
                                        return cleanUrl;
                                    }
                                }
                                
                                // 一致するものが見つからない場合は最初のGIFを使用
                                console.log('Using first GIF found:', matches[0]);
                                return matches[0].split('/revision/')[0];
                            }
                        }
                    } catch (e) {
                        console.log('Failed to fetch Wiki page:', e);
                    }
                    
                    // フォールバック: 直接URLを推測
                    showStatus('画像URLを推測しています...', 'info');
                    
                    // 実際のMinecraft WikiのGIF URLの例:
                    // https://static.wikia.nocookie.net/minecraft_gamepedia/images/e/ed/Enchanted_Stone_Sword.gif
                    const wikiName = url.match(/https?:\/\/([^.]+)\.fandom\.com/)?.[1] || 'minecraft';
                    
                    // よく使われるハッシュパターン
                    const hashes = ['e/ed', 'a/ab', '1/1a', '2/2b', '3/3c', '4/4d', '5/5e', '6/6f', '7/7a', '8/8b', '9/9c', '0/0a', 'b/bc', 'c/cd', 'd/de', 'f/fa'];
                    
                    for (const hash of hashes) {
                        const testUrl = `https://static.wikia.nocookie.net/${wikiName}_gamepedia/images/${hash}/${fileParam}`;
                        console.log('Trying URL pattern:', testUrl);
                        
                        // URLが有効か確認
                        try {
                            const testResponse = await fetch('https://corsproxy.io/?' + encodeURIComponent(testUrl), {
                                method: 'HEAD'
                            });
                            if (testResponse.ok) {
                                console.log('Found working URL:', testUrl);
                                return testUrl;
                            }
                        } catch (e) {
                            // 次のパターンを試す
                        }
                    }
                }
            } catch (e) {
                console.log('Failed to extract Fandom image URL:', e);
            }
        }
        
        // 他の画像直接URLの場合はそのまま返す
        if (url.includes('static.wikia.nocookie.net') || 
            url.includes('.gif') || 
            url.includes('.jpg') || 
            url.includes('.png') ||
            url.includes('.webp')) {
            return url;
        }
        
        return url;
    }

    async function downloadFile(url, filename) {
        try {
            downloadBtn.disabled = true;
            downloadBtn.innerHTML = `<span data-i18n="download.downloading">ダウンロード中</span><span class="loading"></span>`;
            
            // FandomのようなWikiサイトの場合、実際の画像URLを取得
            const actualUrl = await extractActualImageUrl(url);
            if (actualUrl !== url) {
                console.log('Using actual image URL:', actualUrl);
                url = actualUrl;
            }
            
            // まずHEADリクエストでMIMEタイプを確認
            let mimeType = null;
            try {
                const headResponse = await fetch(url, {
                    method: 'HEAD',
                    mode: 'cors',
                    credentials: 'omit'
                });
                mimeType = headResponse.headers.get('content-type');
            } catch (e) {
                console.log('HEAD request failed, continuing with GET');
            }
            
            const response = await fetch(url, {
                mode: 'cors',
                credentials: 'omit'
            }).catch(async (error) => {
                // CORS エラーの場合、プロキシ経由で試す
                console.log('Direct fetch failed, trying proxy method');
                
                // CORSプロキシを使用（公開プロキシサービス）
                const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(url);
                try {
                    const proxyResponse = await fetch(proxyUrl);
                    if (proxyResponse.ok) {
                        return proxyResponse;
                    }
                } catch (proxyError) {
                    console.log('Proxy also failed');
                }
                
                // WikiページのURLの場合、直接画像を開くリンクを提供
                if (url.includes('wiki') && (url.includes('file=') || url.includes('File:'))) {
                    showStatus('Wikiページです。画像を直接開くには、ページ内の画像を右クリックして「画像を新しいタブで開く」を選択し、その画像URLをここに貼り付けてください。', 'info');
                    throw new Error('Wikiページから直接ダウンロードできません。画像の直接URLが必要です。');
                }
                
                // 最終手段: 新しいタブで開く
                const link = document.createElement('a');
                link.href = url;
                link.download = filename || 'download';
                link.target = '_blank';
                link.rel = 'noopener noreferrer';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                throw new Error('CORS制限により直接ダウンロードできません。新しいタブで開きます。');
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            let blob = await response.blob();
            if (!mimeType) {
                mimeType = blob.type;
            }
            
            // 画像の形式変換処理
            if (mimeType && mimeType.startsWith('image/')) {
                const urlPath = new URL(url).pathname.toLowerCase();
                const originalFilename = urlPath.split('/').pop() || '';
                const shouldEnhance = enhanceQualityCheckbox.checked;
                
                // URLやファイル名から元の形式を判定
                const isOriginallyGif = originalFilename.includes('.gif') || 
                                       url.includes('gif') || 
                                       url.includes('file=') && url.includes('.gif');
                
                // 画質向上処理（GIF以外の画像）
                if (shouldEnhance && !isOriginallyGif) {
                    showStatus('画質を向上させています...', 'info');
                    blob = await enhanceImageQuality(blob);
                }
                
                // WebPやAVIFの処理
                if (mimeType === 'image/webp' || mimeType === 'image/avif') {
                    if (isOriginallyGif) {
                        // 元がGIFの場合はGIFとして保存（アニメーション保持のため変換しない）
                        showStatus('GIFファイルを処理中...', 'info');
                        // ファイル名の拡張子だけ.gifに変更
                        mimeType = 'image/gif';
                    } else {
                        // GIF以外はJPEGに変換
                        if (!shouldEnhance) {
                            showStatus('画像を変換中...', 'info');
                        }
                        blob = await convertImageBlob(blob, 'image/jpeg', shouldEnhance);
                        mimeType = 'image/jpeg';
                    }
                }
                // URLパラメータでWebP変換されている場合も処理
                else if (url.includes('format,webp') || url.includes('format=webp')) {
                    if (isOriginallyGif) {
                        // 元がGIFの場合はGIFとして扱う
                        showStatus('GIFファイルを処理中...', 'info');
                        mimeType = 'image/gif';
                    } else {
                        // GIF以外はJPEGに変換
                        if (!shouldEnhance) {
                            showStatus('画像を変換中...', 'info');
                        }
                        blob = await convertImageBlob(blob, 'image/jpeg', shouldEnhance);
                        mimeType = 'image/jpeg';
                    }
                }
                // 通常の画像で画質向上のみ行う場合
                else if (shouldEnhance && !isOriginallyGif) {
                    // 既に画質向上処理済み
                }
            }
            
            const downloadUrl = window.URL.createObjectURL(blob);
            
            // ファイル名の決定
            const finalFilename = filename || extractFilenameFromUrl(url, mimeType);
            
            const link = document.createElement('a');
            link.href = downloadUrl;
            link.download = finalFilename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Clean up
            setTimeout(() => {
                window.URL.revokeObjectURL(downloadUrl);
            }, 100);
            
            showStatus(`ダウンロードが完了しました: ${finalFilename}`, 'success');
        } catch (error) {
            console.error('Download error:', error);
            
            if (error.message.includes('CORS')) {
                showStatus(error.message, 'info');
            } else {
                showStatus(`エラー: ${error.message}`, 'error');
            }
        } finally {
            downloadBtn.disabled = false;
            downloadBtn.innerHTML = '<span data-i18n="download.downloadButton">ダウンロード</span>';
        }
    }

    downloadBtn.addEventListener('click', async function() {
        const url = urlInput.value.trim();
        const filename = filenameInput.value.trim();
        
        if (!url) {
            showStatus('URLを入力してください', 'error');
            return;
        }
        
        // URL検証
        try {
            new URL(url);
        } catch (e) {
            showStatus('有効なURLを入力してください', 'error');
            return;
        }
        
        hideStatus();
        await downloadFile(url, filename);
    });

    // Enterキーでダウンロード
    urlInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            downloadBtn.click();
        }
    });
    
    filenameInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            downloadBtn.click();
        }
    });
});

// 国際化対応
const translations = {
    ja: {
        'download.back': '← その他の機能に戻る',
        'download.title': 'ファイルダウンロード',
        'download.subtitle': 'URLからファイルをダウンロードします',
        'download.howToUse': '使い方',
        'download.instruction1': 'ダウンロードしたいファイルのURLを入力してください',
        'download.instruction2': 'ファイル名を指定できます（省略可）',
        'download.instruction3': 'ダウンロードボタンをクリックしてファイルを保存します',
        'download.urlLabel': 'ファイルURL',
        'download.urlPlaceholder': 'https://example.com/file.pdf',
        'download.filenameLabel': '保存ファイル名（オプション）',
        'download.filenamePlaceholder': 'file.pdf',
        'download.downloadButton': 'ダウンロード',
        'download.downloading': 'ダウンロード中',
        'download.enhanceQuality': '画質を向上させる（画像のみ）',
        'download.qualityInfo': '画像をアップスケーリングして画質を改善します',
        'download.tip': 'ヒント:',
        'download.tipContent': 'Fandom Wikiの画像は、画像を右クリックして「画像アドレスをコピー」で直接URLを取得するか、WikiページのURLをそのまま入力してください。'
    },
    en: {
        'download.back': '← Back to Other Features',
        'download.title': 'File Download',
        'download.subtitle': 'Download files from URL',
        'download.howToUse': 'How to Use',
        'download.instruction1': 'Enter the URL of the file you want to download',
        'download.instruction2': 'You can specify a filename (optional)',
        'download.instruction3': 'Click the download button to save the file',
        'download.urlLabel': 'File URL',
        'download.urlPlaceholder': 'https://example.com/file.pdf',
        'download.filenameLabel': 'Save as (Optional)',
        'download.filenamePlaceholder': 'file.pdf',
        'download.downloadButton': 'Download',
        'download.downloading': 'Downloading',
        'download.enhanceQuality': 'Enhance Quality (Images Only)',
        'download.qualityInfo': 'Upscale and improve image quality',
        'download.tip': 'Tip:',
        'download.tipContent': 'For Fandom Wiki images, right-click the image and copy the image address for direct URL, or input the Wiki page URL directly.'
    }
};

// 言語切り替え機能との統合
if (typeof window.loadLanguage === 'function') {
    window.loadLanguage();
}
</script>